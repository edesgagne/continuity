// Generated by CoffeeScript 1.6.3
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  define(['jquery', 'jquerymobile', 'underscore', 'parse', 'models/step', 'collections/steplist', 'views/stepview', 'views/steplistview'], function($, Mobile, _, Parse, Step, StepList, StepView, StepListView) {
    var MyRouter, _ref;
    return MyRouter = (function(_super) {
      __extends(MyRouter, _super);

      function MyRouter() {
        _ref = MyRouter.__super__.constructor.apply(this, arguments);
        return _ref;
      }

      MyRouter.prototype.initialize = function() {
        console.log("router");
        return $(document).on("click", "a:not([data-bypass])", function(evt) {
          var href, root;
          href = {
            prop: $(this).prop("href"),
            attr: $(this).attr("href")
          };
          root = location.protocol + "//" + location.host + "/";
          if (href.prop && href.prop.slice(0, root.length) === root) {
            evt.preventDefault();
            Parse.history.navigate(href.attr, true);
          }
          return $('#myPanel').panel("close");
        });
      };

      MyRouter.prototype.routes = {
        "": "showHome",
        "safety": "showSafety",
        "help": "showHelp",
        "activities": "showActivities"
      };

      MyRouter.prototype.basics = function(title) {
        console.log("show " + title);
        $('[data-role="content"]').html(title + " page");
        return $('[data-role="header"] > h3').html(title);
      };

      MyRouter.prototype.showHome = function() {
        var title;
        title = "Home";
        this.basics(title);
        return $('[data-role="content"]').html("You are logged in as <b>" + Parse.User.current().get("username") + "</b>");
      };

      MyRouter.prototype.showActivities = function() {
        var title;
        title = "Activities";
        return this.basics(title);
      };

      MyRouter.prototype.showSafety = function() {
        var title;
        title = "Safety Planning";
        this.basics(title);
        return window.uploader.displaySteps();
      };

      MyRouter.prototype.showHelp = function() {
        var title;
        title = "Get Help";
        this.basics(title);
        $('[data-role="content"]').html("\n<a data-icon=\"grid\" data-role=\"button\" href=\"tel:8002738255\">\nCall the Lifeline\n</a>\n\n<button\nonclick=\"window.open('http://suicidepreventionlifeline.org/GetHelp/LifelineChat.aspx', '_blank', 'location=yes');\"\ntarget=\"_blank\" data-icon=\"grid\" data-role=\"button\" href=\"\">\nLifeline Crisis Chat\n</button>\n\n\n<button\nonclick=\"window.open('http://findtreatment.samhsa.gov/MHTreatmentLocator/faces/quickSearch.jspx', '_blank', 'location=yes');\"\ntarget=\"_blank\" data-icon=\"search\" data-role=\"button\" href=\"\">\nTreatment Locator\n</button>\n\n\n");
        return $('[data-role="button"]').button();
      };

      return MyRouter;

    })(Parse.Router);
  });

}).call(this);
